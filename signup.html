<html lang="en">
<head>
    <title>Shyori</title>

    <!-- BEGIN META -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="keywords" content="your,keywords">
    <meta name="description" content="Short explanation about this website">

    <!-- BEGIN STYLESHEETS -->
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,300,400,600,700,800' rel='stylesheet' type='text/css'/>
    <link type="text/css" rel="stylesheet" href="assets/css/theme-2/bootstrap.css" />
    <link type="text/css" rel="stylesheet" href="assets/css/theme-2/materialadmin.css" />
    <link type="text/css" rel="stylesheet" href="assets/css/theme-2/material-design-iconic-font.min.css" /> <!--Material Design Iconic Font-->
    <!-- Additional CSS includes -->
    <link rel="stylesheet" href="assets/css/style.css">

</head>
<body>
<header id="header">
    <div class="headerbar">
        <div class="headerbar-left col-sm-12">
            <ul class="header-nav header-nav-options">
                <li class="header-nav-brand col-xs-6">
                    <div class="brand-holder">
                        <a href="choice.html">
                            <span class="text-lg text-bold">Shyori</span>
                        </a>
                    </div>
                </li>
            </ul>
        </div>
    </div>
</header>
<div id="base">
    <div id="content">
        <section>
            <div class="section-body">
                <div class="card style-transparent">
                    <div class="card-body">
                        <form class="form" action="">
                            <div class="form-group floating-label">
                                <input type="text" class="form-control" id="username">
                                <label for="username">Username / E-mail</label>
                            </div>
                            <div class="form-group floating-label">
                                <input type="password" class="form-control" id="password">
                                <label for="password">Password</label>
                            </div>
                        </form>
                        <button id="login" class="btn btn-lg btn-block btn-primary">Sign Up</button>
                        <div id="error-message">
                            <p></p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>
</div>

<!-- BEGIN JAVASCRIPT -->
<script src="assets/js/libs/jquery/jquery-1.11.2.min.js"></script>
<script src="assets/js/libs/jquery/jquery-migrate-1.2.1.min.js"></script>
<script src="assets/js/libs/bootstrap/bootstrap.min.js"></script>
<script src="assets/js/libs/nanoscroller/jquery.nanoscroller.min.js"></script>

<!-- Put App.js last in your javascript imports -->
<script src="assets/js/core/source/App.min.js"></script>


<script>
    $(document).ready(function () {
        var $username=$("#username");

        var $password=$("#password");

        $('#login').click(function () {

            $.ajax(
                    {
                        type:'GET',
                        url:'http://127.0.0.1:5000/signup/',
                        data:{username:$username.val(),password:$password.val()},
                        dataType:'json',
                        crossDomain:true,
                        jsonpCallback: 'callback',
                        success:function (response){
                            console.log(response);
                            if (response.insertion==="failed"){
                                $("#error-message").append('<div class="alert alert-danger" role="alert"><strong>Hi!</strong>Please try another username</div>');
                            }
                            else {
                                console.log(response.insertion==="success");
                                window.location.href='login.html';
                            }
                        }
                    }
            );
        });
    });
</script>
</body>
</html>